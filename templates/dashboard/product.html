{% extends 'dashboard/base.html' %}
{% block content %}
    <!-- Header -->
    <header class="container-fluid">
        <div
                class="d-flex justify-content-between align-items-center px-5 py-3">
            <h1 class="text-header">Product</h1>

            {% include 'dashboard/components/account.html' %}
        </div>
    </header>
    <!-- End of Header -->

    <!-- Content -->
    <div class="container p-5">
        <div class="mb-4">
            <div class="mb-3 d-flex justify-content-end w-100">
                <button
                        class="btn btn-add-product text-white"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseForm"
                        aria-expanded="false"
                        aria-controls="collapseForm">
                    Add Product
                </button>
            </div>
            <form
                    enctype="multipart/form-data"
                    method="post"
                    id="collapseForm"
                    class="collapse card">
                {% csrf_token %}
                <div class="card-body row">
                    <div class="mb-3 col-12">
                        <label
                                for="name"
                                class="form-label"
                        >Product Name</label
                        >
                        <input
                                required
                                type="text"
                                class="form-control"
                                id="name"
                                name="name"
                                autocomplete="off"
                                placeholder="Blue Jeans"/>
                    </div>
                    <div class="mb-3 col-12">
                        <label
                                for="description"
                                class="form-label"
                        >Description</label
                        >
                        <textarea
                                required
                                class="form-control"
                                id="description"
                                name="description"
                                rows="3"></textarea>
                    </div>
                    <div class="mb-3 col-6">
                        <label for="price" class="form-label">Price</label>
                        <div class="input-group">
                            <span class="input-group-text">$</span>
                            <input
                                    required
                                    type="number"
                                    class="form-control"
                                    id="price"
                                    name="price"
                                    aria-label="Amount (to the nearest dollar)"/>
                        </div>
                    </div>
                    <div class="mb-3 col-6">
                        <label for="category" class="form-label d-flex justify-content-between">Category
                            <a class="btn btn-add-product text-white" href="{% url 'category' %}">+</a>
                        </label>
                        {{ form.category }}
                    </div>
                    <div class="mb-3 col-12">
                        <label for="image" class="form-label"></label>
                        <input type="file" class="form-control" id="image" name="image" accept="image/*">
                    </div>
                    <div class="mb-3 justify-content-end row">
                        <button class="btn btn-add-product text-white col-md-2 py-2" type="submit">Save</button>
                    </div>
                </div>
            </form>
        </div>

        <div class="table-responsive">
            <table class="table caption-top table-hover align-middle">
                <caption>
                    <div class="d-flex justify-content-between">
                        <h5>List of Products</h5>
                        <form class="d-flex">
                            <input
                                    type="text"
                                    placeholder="Search"
                                    class="form-control"
                                    name="search"/>
                            <button class="btn btn-secondary" type="submit">
                                <i class="fa-solid fa-magnifying-glass"></i>
                            </button>
                        </form>
                    </div>
                </caption>
                <thead>
                <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Category</th>
                    <th class="text-center">Action</th>
                </tr>
                </thead>
                <tbody>
                {% for product in page %}
                    <tr>
                        <td>{{ product.id }}</td>
                        <td>{{ product.name }}</td>
                        <td><i class="fa-solid fa-peso-sign"></i>{{ product.price }}</td>
                        <td>{{ product.category }}</td>
                        <td class="d-flex justify-content-center">
                            <button class="btn btn-link">
                                <a href="{{ product.image.url }}">
                                    <i class="fa-solid fa-eye"></i>
                                </a>
                            </button>
                            <button class="btn btn-danger">
                                <a href="{% url 'delete_product' product_id=product.id %}">
                                    <i class="fa-solid fa-trash-can"></i>
                                </a>

                            </button>
                        </td>
                    </tr>
                {% endfor %}


                </tbody>
            </table>
            <nav aria-label="Page navigation example">
                <ul class="pagination">

                    <li class="page-item {% if not page.has_previous %}disabled{% endif %}">
                        <a
                                class="page-link"
                                href="?page={% if page.has_previous %}{{ page.previous_page_number }}{% endif %}"
                        >Previous</a
                        >
                    </li>
                    <li class="page-item">
                        <a
                                class="page-link"
                                href="#"
                        >{{ page.number }}</a
                        >
                    </li>
                    <li class="page-item {% if not page.has_next %}disabled{% endif %}">
                        <a
                                class="page-link"
                                href="?page={% if page.has_next %}{{ page.next_page_number }}{% endif %}"
                        >Next</a
                        >
                    </li>
                </ul>
            </nav>
        </div>
    </div>
{% endblock %}
